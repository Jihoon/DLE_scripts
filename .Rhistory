avg.price.footwear <- as.numeric(footwear.all %>%
summarise(avg.price = sum(val_tot*weight, na.rm=TRUE) / sum(weight.tot*weight, na.rm=TRUE) * 1000))
# Price per decile
avg.price.clothing.dec <- clothing.all %>% group_by(decile) %>%
summarise(avg.price = sum(val_tot*weight, na.rm=TRUE) / sum(weight.tot*weight, na.rm=TRUE) * 1000)
avg.price.footwear.dec <- footwear.all %>% group_by(decile) %>%
summarise(avg.price = sum(val_tot*weight, na.rm=TRUE) / sum(weight.tot*weight, na.rm=TRUE) * 1000)
### ZAF [kg/cap]
ZAF_clothing.all <- ZAF_clothing %>% left_join(ZAF_HH, by = c("id" = "hhid"))
ZAF_footwear.all <- ZAF_footwear %>% left_join(ZAF_HH, by = c("id" = "hhid"))
dle.clothing.pcap.ZAF <- ZAF_clothing.all %>%
summarise(val_median=weighted.median(val_tot/hh_size, weight, na.rm=TRUE)) %>% mutate(kg.pcap=val_median/avg.price.clothing) %>%
select(kg.pcap) %>% as.numeric()
dle.footwear.pcap.ZAF <- ZAF_footwear.all %>%
summarise(val_median=weighted.median(val_tot/hh_size, weight, na.rm=TRUE)) %>% mutate(kg.pcap=val_median/avg.price.footwear) %>%
select(kg.pcap) %>% as.numeric()
avg.clothing.pcap.ZAF <- ZAF_clothing.all %>%
summarise(val_tot=sum(val_tot*weight, na.rm=TRUE)) %>% mutate(kg.pcap=val_tot/ZAF_pop_io.yr/avg.price.clothing) %>%
select(kg.pcap) %>% as.numeric()
avg.footwear.pcap.ZAF <- ZAF_footwear.all %>%
summarise(val_tot=sum(val_tot*weight, na.rm=TRUE)) %>% mutate(kg.pcap=val_tot/ZAF_pop_io.yr/avg.price.footwear) %>%
select(kg.pcap) %>% as.numeric()
# Mean expenditure $ - ZAF
exp.clothing.pcap.ZAF <- ZAF_clothing.all %>%
summarise(val_mean=weighted.median(val_tot/hh_size, weight, na.rm=TRUE))
exp.footwear.pcap.ZAF <- ZAF_footwear.all %>%
summarise(val_mean=weighted.median(val_tot/hh_size, weight, na.rm=TRUE))
### BRA [kg/cap]
BRA_clothing.all <- BRA_clothing %>% left_join(BRA_HH, by = c("id" = "hhid"))
BRA_footwear.all <- BRA_footwear %>% left_join(BRA_HH, by = c("id" = "hhid"))
dle.clothing.pcap.BRA <- BRA_clothing.all %>%
summarise(val_median=weighted.median(val_tot/hh_size, weight, na.rm=TRUE)) %>% mutate(kg.pcap=val_median/avg.price.clothing) %>%
select(kg.pcap) %>% as.numeric()
dle.footwear.pcap.BRA <- BRA_footwear.all %>%
summarise(val_median=weighted.median(val_tot/hh_size, weight, na.rm=TRUE)) %>% mutate(kg.pcap=val_median/avg.price.footwear) %>%
select(kg.pcap) %>% as.numeric()
avg.clothing.pcap.BRA <- BRA_clothing %>% left_join(BRA_HH, by = c("id" = "hhid")) %>%
summarise(val_tot=sum(val_tot*weight, na.rm=TRUE)) %>% mutate(kg.pcap=val_tot/BRA_pop_io.yr/avg.price.clothing) %>%
select(kg.pcap) %>% as.numeric()
avg.footwear.pcap.BRA <- BRA_footwear %>% left_join(BRA_HH, by = c("id" = "hhid")) %>%
summarise(val_tot=sum(val_tot*weight, na.rm=TRUE)) %>% mutate(kg.pcap=val_tot/BRA_pop_io.yr/avg.price.footwear) %>%
select(kg.pcap) %>% as.numeric()
# Mean expenditure $ - BRA
exp.clothing.pcap.BRA <- BRA_clothing.all %>%
summarise(val_mean=weighted.mean(val_tot/hh_size, weight, na.rm=TRUE))
exp.footwear.pcap.BRA <- BRA_footwear.all %>%
summarise(val_mean=weighted.mean(val_tot/hh_size, weight, na.rm=TRUE))
### Derive total kg of Clothing (to get MJ/kg)
tot.clothing.kg.IND <- avg.clothing.pcap.IND *IND_pop_io.yr
tot.footwear.kg.IND <- avg.footwear.pcap.IND *IND_pop_io.yr
tot.dle.clothing.kg.IND <- dle.clothing.pcap.IND *IND_pop_io.yr
tot.dle.footwear.kg.IND <- dle.footwear.pcap.IND *IND_pop_io.yr
tot.clothing.kg.ZAF <- avg.clothing.pcap.ZAF *ZAF_pop_io.yr
tot.footwear.kg.ZAF <- avg.footwear.pcap.ZAF *ZAF_pop_io.yr
tot.dle.clothing.kg.ZAF <- dle.clothing.pcap.ZAF *ZAF_pop_io.yr
tot.dle.footwear.kg.ZAF <- dle.footwear.pcap.ZAF *ZAF_pop_io.yr
tot.clothing.kg.BRA <- avg.clothing.pcap.BRA *BRA_pop_io.yr
tot.footwear.kg.BRA <- avg.footwear.pcap.BRA *BRA_pop_io.yr
tot.dle.clothing.kg.BRA <- dle.clothing.pcap.BRA *BRA_pop_io.yr
tot.dle.footwear.kg.BRA <- dle.footwear.pcap.BRA *BRA_pop_io.yr
clothing.lifetime <- 3 # https://eastonstewartsvilledrycleaner36.wordpress.com/2010/11/30/the-average-life-expectancy-of-clothing/
footwear.lifetime <- 3
mean(tot.footwear.elec.IND)+mean(tot.clothing.elec.IND)
mean(tot.footwear.IND)+mean(tot.clothing.IND)
tot.clothing.kg.IND
tot.footwear.kg.BRA
tot.footwear.kg.ZAF
(tot.clothing.kg.IND+tot.footwear.kg.IND)
(tot.footwear.kg.BRA+tot.clothing.kg.BRA)
(tot.footwear.kg.ZAF+tot.clothing.kg.ZAF)
IO.year
mean(tot.footwear.IND)+mean(tot.clothing.IND)
mean(tot.footwear.BRA)+mean(tot.clothing.BRA)
mean(tot.footwear.ZAF)+mean(tot.clothing.ZAF)
avg.clothing.pcap.BRA
avg.clothing.pcap.IND
avg.clothing.pcap.ZAF
### Clothing (incl. shoes)
################################
load(file="./Saved tables/BRA.tfei.icp.fix.2010.IO.Rda")
load(file="./Saved tables/IND.tfei.icp.fix.2010.IO.Rda")
load(file="./Saved tables/ZAF.tfei.icp.fix.2010.IO.Rda")
load(file="./Saved tables/BRA.tfei.icp.elec.fix.2010.IO.Rda")
load(file="./Saved tables/IND.tfei.icp.elec.fix.2010.IO.Rda")
load(file="./Saved tables/ZAF.tfei.icp.elec.fix.2010.IO.Rda")
load(file="./Saved tables/BRA.tfei.icp.non.elec.fix.2010.IO.Rda")
load(file="./Saved tables/IND.tfei.icp.non.elec.fix.2010.IO.Rda")
load(file="./Saved tables/ZAF.tfei.icp.non.elec.fix.2010.IO.Rda")
load(file="./Saved tables/BRA_FD_ICP_io.yr.fix.2010.IO.Rda")
load(file="./Saved tables/IND_FD_ICP_io.yr.fix.2010.IO.Rda")
load(file="./Saved tables/ZAF_FD_ICP_io.yr.fix.2010.IO.Rda")
IO.year
IO.year=2010
final_demand <- read.csv(paste0(EXIO3_path, paste0("Y_", IO.year, ".csv")), header = FALSE)
# *_fd_exio being used in rIPFP
IND_fd_ex <- matrix(final_demand[,IND_idx_fd[1]], nrow=200) / EXR_EUR$r  # to M.USD (2007 MER)
IND_fd_exio <- rowSums(IND_fd_ex) # Sum all HH FD across countries
BRA_fd_ex <- matrix(final_demand[,BRA_idx_fd[1]], nrow=200) / EXR_EUR$r  # to M.USD (2007 MER)
BRA_fd_exio <- rowSums(BRA_fd_ex) # Sum all HH FD across countries
ZAF_fd_ex <- matrix(final_demand[,ZAF_idx_fd[1]], nrow=200) / EXR_EUR$r  # to M.USD (2007 MER)
ZAF_fd_exio <- rowSums(ZAF_fd_ex) # Sum all HH FD across countries
### Set Scalers (to match IO FD)
scaler_IND <- sum(IND_FD_ICP_io.yr[,1]) / sum(get_purch_price(IND_fd_exio, "IN"))
init_FD_IND <- IND_FD_ICP_io.yr[,1] / scaler_IND
scaler_BRA <- sum(BRA_FD_ICP_io.yr[,1]) / sum(get_purch_price(BRA_fd_exio, "BR"))
init_FD_BRA <- BRA_FD_ICP_io.yr[,1] / scaler_BRA
scaler_ZAF <- sum(ZAF_FD_ICP_io.yr[,1]) / sum(get_purch_price(ZAF_fd_exio, "ZA"))
init_FD_ZAF <- ZAF_FD_ICP_io.yr[,1] / scaler_ZAF
scaler_IND
scaler_BRA
scaler_ZAF
### 1. Total TEnergy for clothing
# Approach 1. Based on TPEI (either ICP or EXIO) and original expenditure from survey (EJ)
# ICP 50, 51, 54: only for purchases and no repairs (repair expenditure observations are not consistent across countries)
# I will assume just e
idx.clothing.exio <- 56:57 #55:57  # No textile
idx.clothing.icp <- c(50, 51)  # 50:55
idx.footwear.icp <- 54  # 50:55
# Average intensity (MJ/USD) - Not used
weighted.mean(colMeans(BRA.tfei.icp[, idx.clothing.icp]), weight=BRA_FD_ICP_io.yr[idx.clothing.icp, 1])
weighted.mean(colMeans(IND.tfei.icp[, idx.clothing.icp]), weight=IND_FD_ICP_io.yr[idx.clothing.icp, 1])
weighted.mean(colMeans(ZAF.tfei.icp[, idx.clothing.icp]), weight=ZAF_FD_ICP_io.yr[idx.clothing.icp, 1])
# Total energy/year (EJ/year) - Good to be based on household consumption (ICP)
tot.clothing.BRA <- rowSums(BRA.tfei.icp[, idx.clothing.icp] %*% diag(BRA_FD_ICP_io.yr[idx.clothing.icp, 1])) / 1e6 / scaler_BRA
tot.clothing.IND <- rowSums(IND.tfei.icp[, idx.clothing.icp] %*% diag(IND_FD_ICP_io.yr[idx.clothing.icp, 1])) / 1e6 / scaler_IND
tot.clothing.ZAF <- rowSums(ZAF.tfei.icp[, idx.clothing.icp] %*% diag(ZAF_FD_ICP_io.yr[idx.clothing.icp, 1])) / 1e6 / scaler_ZAF
tot.footwear.BRA <- (BRA.tfei.icp[, idx.footwear.icp] * BRA_FD_ICP_io.yr[idx.footwear.icp, 1]) / 1e6 / scaler_BRA
tot.footwear.IND <- (IND.tfei.icp[, idx.footwear.icp] * IND_FD_ICP_io.yr[idx.footwear.icp, 1]) / 1e6 / scaler_IND
tot.footwear.ZAF <- (ZAF.tfei.icp[, idx.footwear.icp] * ZAF_FD_ICP_io.yr[idx.footwear.icp, 1]) / 1e6 / scaler_ZAF
tot.clothing.elec.BRA <- rowSums(BRA.tfei.icp.elec[, idx.clothing.icp] %*% diag(BRA_FD_ICP_io.yr[idx.clothing.icp, 1])) / 1e6 / scaler_BRA
tot.clothing.elec.IND <- rowSums(IND.tfei.icp.elec[, idx.clothing.icp] %*% diag(IND_FD_ICP_io.yr[idx.clothing.icp, 1])) / 1e6 / scaler_IND
tot.clothing.elec.ZAF <- rowSums(ZAF.tfei.icp.elec[, idx.clothing.icp] %*% diag(ZAF_FD_ICP_io.yr[idx.clothing.icp, 1])) / 1e6 / scaler_ZAF
tot.footwear.elec.BRA <- (BRA.tfei.icp.elec[, idx.footwear.icp] * BRA_FD_ICP_io.yr[idx.footwear.icp, 1]) / 1e6 / scaler_BRA
tot.footwear.elec.IND <- (IND.tfei.icp.elec[, idx.footwear.icp] * IND_FD_ICP_io.yr[idx.footwear.icp, 1]) / 1e6 / scaler_IND
tot.footwear.elec.ZAF <- (ZAF.tfei.icp.elec[, idx.footwear.icp] * ZAF_FD_ICP_io.yr[idx.footwear.icp, 1]) / 1e6 / scaler_ZAF
tot.clothing.non.elec.BRA <- rowSums(BRA.tfei.icp.non.elec[, idx.clothing.icp] %*% diag(BRA_FD_ICP_io.yr[idx.clothing.icp, 1])) / 1e6 / scaler_BRA
tot.clothing.non.elec.IND <- rowSums(IND.tfei.icp.non.elec[, idx.clothing.icp] %*% diag(IND_FD_ICP_io.yr[idx.clothing.icp, 1])) / 1e6 / scaler_IND
tot.clothing.non.elec.ZAF <- rowSums(ZAF.tfei.icp.non.elec[, idx.clothing.icp] %*% diag(ZAF_FD_ICP_io.yr[idx.clothing.icp, 1])) / 1e6 / scaler_ZAF
tot.footwear.non.elec.BRA <- (BRA.tfei.icp.non.elec[, idx.footwear.icp] * BRA_FD_ICP_io.yr[idx.footwear.icp, 1]) / 1e6 / scaler_BRA
tot.footwear.non.elec.IND <- (IND.tfei.icp.non.elec[, idx.footwear.icp] * IND_FD_ICP_io.yr[idx.footwear.icp, 1]) / 1e6 / scaler_IND
tot.footwear.non.elec.ZAF <- (ZAF.tfei.icp.non.elec[, idx.footwear.icp] * ZAF_FD_ICP_io.yr[idx.footwear.icp, 1]) / 1e6 / scaler_ZAF
# # Approach 2. Based on TPEI (.use) and individual hh expenditure (GJ/cap) - Better! But not used for simple integration
# # Apply both FC_ICP: Original and adjusted
# # Take the min and max from the two results for the DLE comparison
# load("./Saved tables/BRA_intensities_val_BRA.use.Rda") #BRA_intensity.use
# load("./Saved tables/BRA_FD_ICP_HH_adj_BR.Rda") #BRA_FD_ICP_HH_adj_BR
# load("./Saved tables/BRA_FD_harmonized.Rda") #BRA_FD_ICP_AllHH
# list[all_HH_c_BR, sd_hs] <- GetHHSectoralEnergyPerCap(idx.clothing.icp,'BRA', BRA_FD_ICP_HH_adj_BR, BRA_intensity.use) # more reliable than IND_intensity
# list[all_HH_c_BR, sd_hs] <- GetHHSectoralEnergyPerCap(idx.clothing.icp,'BRA', BRA_FD_ICP_HH_adj_BR, BRA.tfei.icp) # more reliable than IND_intensity
# (SummarizeGJPerCap(all_HH_c_BR) * as.numeric(BRA_pop_io.yr)) %>% mutate(min=u-2*sd, max=u+2*sd)
# list[all_HH_c_BR, sd_hs] <- GetHHSectoralEnergyPerCap(idx.clothing.icp,'BRA', BRA_FD_ICP_AllHH, BRA_intensity.use) # more reliable than IND_intensity
# (SummarizeGJPerCap(all_HH_c_BR) * as.numeric(BRA_pop_io.yr)) %>% mutate(min=u-2*sd, max=u+2*sd)
#
# load("./Saved tables/IND_intensities.use.Rda")
# load("./Saved tables/IND_FD_ICP_HH_adj.Rda")
# load("./Saved tables/IND_FD_harmonized.Rda") #IND_FD_ICP_AllHH
# list[all_HH_c_IN, sd_hs] <- GetHHSectoralEnergyPerCap(idx.clothing.icp,'IND', IND_FD_ICP_HH_adj, IND_intensity.use) # more reliable than IND_intensity
# (SummarizeGJPerCap(all_HH_c_IN) * as.numeric(IND_pop_io.yr)) %>% mutate(min=u-2*sd, max=u+2*sd)
# list[all_HH_c_IN, sd_hs] <- GetHHSectoralEnergyPerCap(idx.clothing.icp,'IND', IND_FD_ICP_AllHH, IND_intensity.use) # more reliable than IND_intensity
# (SummarizeGJPerCap(all_HH_c_IN) * as.numeric(IND_pop_io.yr)) %>% mutate(min=u-2*sd, max=u+2*sd)
#
# load("./Saved tables/ZAF_intensities.use.Rda")
# load("./Saved tables/ZAF_FD_ICP_HH_adj.Rda")
# load("./Saved tables/ZAF_FD_harmonized.Rda") #ZAF_FD_ICP_AllHH
# list[all_HH_c_ZA, sd_hs] <- GetHHSectoralEnergyPerCap(idx.clothing.icp,'ZAF', ZAF_FD_ICP_HH_adj, ZAF_intensity.use) # more reliable than IND_intensity
# (SummarizeGJPerCap(all_HH_c_ZA) * as.numeric(ZAF_pop_io.yr)) %>% mutate(min=u-2*sd, max=u+2*sd)
# list[all_HH_c_ZA, sd_hs] <- GetHHSectoralEnergyPerCap(idx.clothing.icp,'ZAF', ZAF_FD_ICP_AllHH, ZAF_intensity.use) # more reliable than IND_intensity
# (SummarizeGJPerCap(all_HH_c_ZA) * as.numeric(ZAF_pop_io.yr)) %>% mutate(min=u-2*sd, max=u+2*sd)
#
# rm(all_HH_c_BR, all_HH_c_IN, all_HH_c_ZA)
# gc()
### 2. Deriving DLE threshold [kg/cap] for Clothing (and average too)
# Derive from India data and apply the same $/kg (IND) to get kg/cap in BRA and ZAF
datapath <- "C:/Users/min/IIASA/DLE - Documents/WS3 - Documents/Trajectories/Clothing/"
weight.clothing <- read_xlsx(paste0(datapath, "Weights-IND.xlsx"), range="A1:J31") %>% select(CODE, `g/each - MIN`, `g/each - MAX`) %>%
rename(weight.min=`g/each - MIN`, weight.max=`g/each - MAX`, code=CODE)
### India
# No quantity for some items (code=372, 356, 357, 368, 375) -> Assume same avg price as 'shirts, T-shirts' (for decile1) (code=363)
price.shirt <- as.numeric(IND_clothing %>% filter(code==363) %>% mutate(price=val_tot/qty_tot) %>%
left_join(IND_HH,  by = c("id" = "hhid")) %>% filter(decile=="decile1") %>%
summarise(price.shirt=weighted.mean(price, weight, na.rm=T)))
# Get total weight by hh in gram (and val_tot too)
clothing.all <- IND_clothing %>% inner_join(weight.clothing) %>%
mutate_cond(code %in% c(372, 356, 357, 368, 375), qty_tot=val_tot/price.shirt) %>% # fill in qty for no-price items
mutate(weight.tot=qty_tot*weight.min, weight.tot.max=qty_tot*weight.max) %>%
mutate_cond(code==374, weight.tot=qty_tot) %>% # knitting wool
group_by(id) %>% summarise(val_tot=sum(val_tot, na.rm=TRUE), weight.tot=sum(weight.tot, na.rm=TRUE), weight.tot.max=sum(weight.tot.max, na.rm=TRUE)) %>%
left_join(IND_HH, by = c("id" = "hhid"))
# Get total weight by hh in gram (and val_tot too)
footwear.all <- IND_footwear %>% inner_join(weight.clothing) %>%
mutate(weight.tot=qty_tot*weight.min, weight.tot.max=qty_tot*weight.max) %>%
group_by(id) %>% summarise(val_tot=sum(val_tot, na.rm=TRUE), weight.tot=sum(weight.tot, na.rm=TRUE), weight.tot.max=sum(weight.tot.max, na.rm=TRUE)) %>%
left_join(IND_HH, by = c("id" = "hhid"))
# DLE threshold [kg/cap] (g to kg) - only Flow
dle.clothing.pcap.IND <- clothing.all %>% summarise(median = weighted.median(weight.tot/hh_size, weight, na.rm=TRUE)/1000) %>% as.numeric() # 1.3 kg/cap
dle.footwear.pcap.IND <- footwear.all %>% summarise(median = weighted.median(weight.tot/hh_size, weight, na.rm=TRUE)/1000) %>% as.numeric()  # 0.9 kg/cap
# avg.clothing.pcap.IND <- clothing.all %>% summarise(mean = weighted.mean(weight.tot/hh_size, weight, na.rm=TRUE)/1000) %>% as.numeric() # 1.3 kg/cap
# avg.footwear.pcap.IND <- footwear.all %>% summarise(mean = weighted.mean(weight.tot/hh_size, weight, na.rm=TRUE)/1000) %>% as.numeric()  # 0.9 kg/cap
avg.clothing.pcap.IND <- clothing.all %>%
summarise(val_tot=sum(weight.tot*weight, na.rm=TRUE)) %>% mutate(kg.pcap=val_tot/IND_pop_io.yr/1000) %>%
select(kg.pcap) %>% as.numeric()
avg.footwear.pcap.IND <- footwear.all %>%
summarise(val_tot=sum(weight.tot*weight, na.rm=TRUE)) %>% mutate(kg.pcap=val_tot/IND_pop_io.yr/1000) %>%
select(kg.pcap) %>% as.numeric()
# Mean expenditure $/cap - IND - Not used
exp.clothing.pcap.IND <- clothing.all %>% summarise(median = weighted.median(val_tot/hh_size, weight, na.rm=TRUE)) %>% as.numeric()
exp.footwear.pcap.IND <- footwear.all %>% summarise(median = weighted.median(val_tot/hh_size, weight, na.rm=TRUE)) %>% as.numeric()
kg.pcap.dec <- clothing.all %>% group_by(decile) %>% summarise(clothing.per.cap = sum(weight.tot*weight, na.rm=TRUE) / sum(hh_size*weight, na.rm=TRUE) / 1000)
kg.pcap.dec.max <- clothing.all %>% group_by(decile) %>% summarise(clothing.per.cap = sum(weight.tot.max*weight, na.rm=TRUE) / sum(hh_size*weight, na.rm=TRUE) / 1000)
# Average price [$/kg] 2010USD ppp nationwide - Assume this ppp is same in all three countries
avg.price.clothing <- as.numeric(clothing.all %>%
summarise(avg.price = sum(val_tot*weight, na.rm=TRUE) / sum(weight.tot*weight, na.rm=TRUE) * 1000))
avg.price.footwear <- as.numeric(footwear.all %>%
summarise(avg.price = sum(val_tot*weight, na.rm=TRUE) / sum(weight.tot*weight, na.rm=TRUE) * 1000))
# Price per decile
avg.price.clothing.dec <- clothing.all %>% group_by(decile) %>%
summarise(avg.price = sum(val_tot*weight, na.rm=TRUE) / sum(weight.tot*weight, na.rm=TRUE) * 1000)
avg.price.footwear.dec <- footwear.all %>% group_by(decile) %>%
summarise(avg.price = sum(val_tot*weight, na.rm=TRUE) / sum(weight.tot*weight, na.rm=TRUE) * 1000)
### ZAF [kg/cap]
ZAF_clothing.all <- ZAF_clothing %>% left_join(ZAF_HH, by = c("id" = "hhid"))
ZAF_footwear.all <- ZAF_footwear %>% left_join(ZAF_HH, by = c("id" = "hhid"))
dle.clothing.pcap.ZAF <- ZAF_clothing.all %>%
summarise(val_median=weighted.median(val_tot/hh_size, weight, na.rm=TRUE)) %>% mutate(kg.pcap=val_median/avg.price.clothing) %>%
select(kg.pcap) %>% as.numeric()
dle.footwear.pcap.ZAF <- ZAF_footwear.all %>%
summarise(val_median=weighted.median(val_tot/hh_size, weight, na.rm=TRUE)) %>% mutate(kg.pcap=val_median/avg.price.footwear) %>%
select(kg.pcap) %>% as.numeric()
avg.clothing.pcap.ZAF <- ZAF_clothing.all %>%
summarise(val_tot=sum(val_tot*weight, na.rm=TRUE)) %>% mutate(kg.pcap=val_tot/ZAF_pop_io.yr/avg.price.clothing) %>%
select(kg.pcap) %>% as.numeric()
avg.footwear.pcap.ZAF <- ZAF_footwear.all %>%
summarise(val_tot=sum(val_tot*weight, na.rm=TRUE)) %>% mutate(kg.pcap=val_tot/ZAF_pop_io.yr/avg.price.footwear) %>%
select(kg.pcap) %>% as.numeric()
# Mean expenditure $ - ZAF
exp.clothing.pcap.ZAF <- ZAF_clothing.all %>%
summarise(val_mean=weighted.median(val_tot/hh_size, weight, na.rm=TRUE))
exp.footwear.pcap.ZAF <- ZAF_footwear.all %>%
summarise(val_mean=weighted.median(val_tot/hh_size, weight, na.rm=TRUE))
### BRA [kg/cap]
BRA_clothing.all <- BRA_clothing %>% left_join(BRA_HH, by = c("id" = "hhid"))
BRA_footwear.all <- BRA_footwear %>% left_join(BRA_HH, by = c("id" = "hhid"))
dle.clothing.pcap.BRA <- BRA_clothing.all %>%
summarise(val_median=weighted.median(val_tot/hh_size, weight, na.rm=TRUE)) %>% mutate(kg.pcap=val_median/avg.price.clothing) %>%
select(kg.pcap) %>% as.numeric()
dle.footwear.pcap.BRA <- BRA_footwear.all %>%
summarise(val_median=weighted.median(val_tot/hh_size, weight, na.rm=TRUE)) %>% mutate(kg.pcap=val_median/avg.price.footwear) %>%
select(kg.pcap) %>% as.numeric()
avg.clothing.pcap.BRA <- BRA_clothing %>% left_join(BRA_HH, by = c("id" = "hhid")) %>%
summarise(val_tot=sum(val_tot*weight, na.rm=TRUE)) %>% mutate(kg.pcap=val_tot/BRA_pop_io.yr/avg.price.clothing) %>%
select(kg.pcap) %>% as.numeric()
avg.footwear.pcap.BRA <- BRA_footwear %>% left_join(BRA_HH, by = c("id" = "hhid")) %>%
summarise(val_tot=sum(val_tot*weight, na.rm=TRUE)) %>% mutate(kg.pcap=val_tot/BRA_pop_io.yr/avg.price.footwear) %>%
select(kg.pcap) %>% as.numeric()
# Mean expenditure $ - BRA
exp.clothing.pcap.BRA <- BRA_clothing.all %>%
summarise(val_mean=weighted.mean(val_tot/hh_size, weight, na.rm=TRUE))
exp.footwear.pcap.BRA <- BRA_footwear.all %>%
summarise(val_mean=weighted.mean(val_tot/hh_size, weight, na.rm=TRUE))
### Derive total kg of Clothing (to get MJ/kg)
tot.clothing.kg.IND <- avg.clothing.pcap.IND *IND_pop_io.yr
tot.footwear.kg.IND <- avg.footwear.pcap.IND *IND_pop_io.yr
tot.dle.clothing.kg.IND <- dle.clothing.pcap.IND *IND_pop_io.yr
tot.dle.footwear.kg.IND <- dle.footwear.pcap.IND *IND_pop_io.yr
tot.clothing.kg.ZAF <- avg.clothing.pcap.ZAF *ZAF_pop_io.yr
tot.footwear.kg.ZAF <- avg.footwear.pcap.ZAF *ZAF_pop_io.yr
tot.dle.clothing.kg.ZAF <- dle.clothing.pcap.ZAF *ZAF_pop_io.yr
tot.dle.footwear.kg.ZAF <- dle.footwear.pcap.ZAF *ZAF_pop_io.yr
tot.clothing.kg.BRA <- avg.clothing.pcap.BRA *BRA_pop_io.yr
tot.footwear.kg.BRA <- avg.footwear.pcap.BRA *BRA_pop_io.yr
tot.dle.clothing.kg.BRA <- dle.clothing.pcap.BRA *BRA_pop_io.yr
tot.dle.footwear.kg.BRA <- dle.footwear.pcap.BRA *BRA_pop_io.yr
clothing.lifetime <- 3 # https://eastonstewartsvilledrycleaner36.wordpress.com/2010/11/30/the-average-life-expectancy-of-clothing/
footwear.lifetime <- 3
(tot.footwear.kg.ZAF+tot.clothing.kg.ZAF)
(tot.footwear.kg.BRA+tot.clothing.kg.BRA)
(tot.clothing.kg.IND+tot.footwear.kg.IND)
avg.clothing.pcap.ZAF
avg.clothing.pcap.IND
avg.clothing.pcap.BRA
mean(tot.footwear.ZAF)+mean(tot.clothing.ZAF)
mean(tot.footwear.BRA)+mean(tot.clothing.BRA)
mean(tot.footwear.IND)+mean(tot.clothing.IND)
load(file="./Saved tables/BRA.tfei.icp.non.elec.fix.2010.IO.Rda")
rm(BRA.tfei.icp)
load(file="./Saved tables/BRA.tfei.icp.non.elec.fix.2010.IO.Rda")
(BRA.tfei.icp)
rm(BRA.tfei.icp.non.elec)
load(file="./Saved tables/BRA.tfei.icp.non.elec.fix.2010.IO.Rda")
(BRA.tfei.icp.non.elec)
new2010.non.elec <- (BRA.tfei.icp.non.elec)
load(file="./Saved tables/BRA.tfei.icp.non.elec.fix.2008.IO.Rda")
new2008.non.elec <- (BRA.tfei.icp.non.elec)
load(file="./Saved tables/BRA.tfei.icp.non.elec.Jul2018.Rda")
int.old.repl.non.elec <- (BRA.tfei.icp.non.elec)
view(data.frame(ICP_catnames, recalc=colMeans(int.old.recalc), repl.non.elec=colMeans(int.old.repl.non.elec), new2010=colMeans(new2010.non.elec), new2008.non.elec=colMeans(new2008.non.elec)))
view(data.frame(ICP_catnames, repl.non.elec=colMeans(int.old.repl.non.elec), new2010=colMeans(new2010.non.elec), new2008.non.elec=colMeans(new2008.non.elec)))
WDI(country = "XC", indicator = "PA.NUS.FCRF", start = IO.year, end = IO.year, extra = FALSE, cache = NULL)
WDI(country = "XC", indicator = "PA.NUS.FCRF", start = 2007, end = 2007, extra = FALSE, cache = NULL)
# Compare intensity calculations
i1 <- read.csv(paste0(result_path, "DLE intensity by comp.fix.2008.IO.csv"))
i1
# Compare intensity calculations
i1 <- read.csv(paste0(result_path, "DLE intensity by comp.fix.2008.IO.csv")) %>% filter(Type=="OP") %>% group_by(Scenario, Country, Year) %>% summarise_at(vars(Housing.R:Food), sum)
i1
# Compare intensity calculations
i1 <- read.csv(paste0(result_path, "DLE intensity by comp.fix.2008.IO.csv")) %>% select(-(Housing.R:TV))
i1
# Compare intensity calculations
i1 <- read.csv(paste0(result_path, "DLE intensity by comp.fix.2008.IO.csv")) %>% select(-(Housing.R:TV)) %>%
filter(Type=="OP") %>% group_by(Scenario, Country, Year) %>% summarise_at(vars(Housing.R:Food), sum)
# Compare intensity calculations
i1 <- read.csv(paste0(result_path, "DLE intensity by comp.fix.2008.IO.csv")) %>% select(-(Housing.R:TV)) %>%
filter(Type=="OP") %>% group_by(Scenario, Country, Year) %>% summarise_at(vars(Education:Food), sum)
i1 <- read.csv(paste0(result_path, "DLE intensity by comp.fix.2008.IO.csv")) %>% select(-(Housing.R:TV)) %>%
filter(Type=="OP") %>% group_by(Scenario, Country, Year) %>% summarise_at(vars(Education:Food), sum)
i2 <- read.csv(paste0(result_path, "DLE intensity by comp.fix.2010.IO.csv")) %>% select(-(Housing.R:TV)) %>%
filter(Type=="OP") %>% group_by(Scenario, Country, Year) %>% summarise_at(vars(Education:Food), sum)
i0 <- read.csv(paste0(result_path, "DLE intensity by comp.Jul2018.csv")) %>% select(-(Housing.R:TV)) %>%
filter(Type=="OP") %>% group_by(Scenario, Country, Year) %>% summarise_at(vars(Education:Food), sum)
i1
data.frame(i0, i1%>%select(Education:Food), i2%>%select(Education:Food))
i1 <- read.csv(paste0(result_path, "DLE intensity by comp.fix.2008.IO.csv")) %>% select(-(Housing.R:TV)) %>%
filter(Type=="OP") %>% group_by(Scenario, Country, Year) %>% summarise_at(vars(Education:Food), sum) %>% ungroup()
i2 <- read.csv(paste0(result_path, "DLE intensity by comp.fix.2010.IO.csv")) %>% select(-(Housing.R:TV)) %>%
filter(Type=="OP") %>% group_by(Scenario, Country, Year) %>% summarise_at(vars(Education:Food), sum) %>% ungroup()
i0 <- read.csv(paste0(result_path, "DLE intensity by comp.Jul2018.csv")) %>% select(-(Housing.R:TV)) %>%
filter(Type=="OP") %>% group_by(Scenario, Country, Year) %>% summarise_at(vars(Education:Food), sum)
data.frame(i0, i1%>%select(Education:Food), i2%>%select(Education:Food))
i0 <- read.csv(paste0(result_path, "DLE intensity by comp.Jul2018.csv")) %>% select(-(Housing.R:TV)) %>%
filter(Type=="OP") %>% group_by(Scenario, Country, Year) %>% summarise_at(vars(Education:Food), sum) %>%
mutate(Education_fx = Education*0.731, Health_fx = Health*0.731)
data.frame(i0, i1%>%select(Education:Food), i2%>%select(Education:Food))
write.csv(data.frame(i0, i1%>%select(Education:Food), i2%>%select(Education:Food)), "Compare_IO_intensities.csv"
getwd()
result_path
write.csv(data.frame(i0, i1%>%select(Education:Food), i2%>%select(Education:Food)), paste0(result_path, "debug/Compare_IO_intensities.csv"))
load(file="./Saved tables/tfei.exio.EXIO3.2010.fix.Rda")
dim(tfei.exio)
colSums(tfei.exio[,BRA_idx_ex])
exio_ctys
IND_place
EX_catnames
colSums(tfei.exio[,BRA_idx_ex[43]])
colSums(tfei.exio[,BRA_idx_ex[43:46]])
load(file="./Saved tables/tfei.exio.EXIO3.2008.fix.Rda")
colSums(tfei.exio[,BRA_idx_ex[43:46]])
load(file="./Saved tables/BRA.tfei.icp.2008.old.2007.IO.old.PPP.NUS.Rda")
colSums(tfei.exio[,BRA_idx_ex[43:46]])
load(file="./Saved tables/tfei.exio.EXIO3.2008.old.Rda")
colSums(tfei.exio[,BRA_idx_ex[43:46]])
load(file="./Saved tables/tfei.exio.EXIO3.2007.old.Rda")
colSums(tfei.exio[,BRA_idx_ex[43:46]])
colSums(tfei.exio[,BRA_idx_ex[9:12]])
load(file="./Saved tables/tfei.exio.EXIO3.2008.fix.Rda")
colSums(tfei.exio[,BRA_idx_ex[9:12]])
load(file="./Saved tables/tfei.exio.EXIO3.2010.fix.Rda")
colSums(tfei.exio[,BRA_idx_ex[9:12]])
load(file="./Saved tables/tfei.exio.EXIO3.2008.old.Rda")
colSums(tfei.exio[,BRA_idx_ex[9:12]])
load(file="./Saved tables/tfei.exio.EXIO3.2010.fix.Rda")
colSums(tfei.exio[,BRA_idx_ex)
colSums(tfei.exio[,BRA_idx_ex])
colSums(tfei.exio[,BRA_idx_ex[1:15]])
load(file="./Saved tables/tfei.exio.EXIO3.2008.fix.Rda")
colSums(tfei.exio[,BRA_idx_ex[1:15]])
### 1. All up-to-date run (2010)
IO.year <- 2010
load(file="./Saved tables/tfei.exio.EXIO3.2010.fix.Rda")
load(file="./Saved tables/dfei.exio.EXIO3.2010.fix.Rda")
load(file="./Saved tables/L_inverse_EXIO3_2010.Rda")
CES.year = 2010
##################################################################################################
###  Recalculate the conversion factors based on IO.year
# Deflate currency in 2010 to 2007 (EXIO)
CPI <- WDI(country = c("IN", "BR", "FR", "ZA"), indicator = "FP.CPI.TOTL", start = IO.year, end = 2015, extra = FALSE, cache = NULL)
# For now let's assume both health and edu thresholds are 2010 PPP $ (Health is 2012 PPP$.)
# CPI_ratio_IND.edu <- as.numeric(CPI %>% filter(year==2010 & iso2c=='IN') %>% select(FP.CPI.TOTL) / CPI %>% filter(year==IO.year & iso2c=='IN') %>% select(FP.CPI.TOTL))
# CPI_ratio_BRA.edu <- as.numeric(CPI %>% filter(year==2010 & iso2c=='BR') %>% select(FP.CPI.TOTL) / CPI %>% filter(year==IO.year & iso2c=='BR') %>% select(FP.CPI.TOTL))
# CPI_ratio_ZAF.edu <- as.numeric(CPI %>% filter(year==2010 & iso2c=='ZA') %>% select(FP.CPI.TOTL) / CPI %>% filter(year==IO.year & iso2c=='ZA') %>% select(FP.CPI.TOTL))
# CPI_ratio_IND.hth <- as.numeric(CPI %>% filter(year==2012 & iso2c=='IN') %>% select(FP.CPI.TOTL) / CPI %>% filter(year==IO.year & iso2c=='IN') %>% select(FP.CPI.TOTL))
# CPI_ratio_BRA.hth <- as.numeric(CPI %>% filter(year==2012 & iso2c=='BR') %>% select(FP.CPI.TOTL) / CPI %>% filter(year==IO.year & iso2c=='BR') %>% select(FP.CPI.TOTL))
# CPI_ratio_ZAF.hth <- as.numeric(CPI %>% filter(year==2012 & iso2c=='ZA') %>% select(FP.CPI.TOTL) / CPI %>% filter(year==IO.year & iso2c=='ZA') %>% select(FP.CPI.TOTL))
CPI_ratio_IND <- as.numeric(CPI %>% filter(year==CES.year & iso2c=='IN') %>% select(FP.CPI.TOTL) / CPI %>% filter(year==IO.year & iso2c=='IN') %>% select(FP.CPI.TOTL))
CPI_ratio_BRA <- as.numeric(CPI %>% filter(year==CES.year & iso2c=='BR') %>% select(FP.CPI.TOTL) / CPI %>% filter(year==IO.year & iso2c=='BR') %>% select(FP.CPI.TOTL))
CPI_ratio_ZAF <- as.numeric(CPI %>% filter(year==CES.year & iso2c=='ZA') %>% select(FP.CPI.TOTL) / CPI %>% filter(year==IO.year & iso2c=='ZA') %>% select(FP.CPI.TOTL))
PPP_cty = WDI(country = c("IN", "BR", "ZA"), indicator = c("PA.NUS.PPP", "PA.NUS.PRVT.PP"), start = CES.year, end = CES.year, extra = FALSE, cache = NULL)
PPP_IND <- as.numeric(PPP_cty %>% filter(country=="India") %>% select(PA.NUS.PPP))
PPP_BRA <- as.numeric(PPP_cty %>% filter(country=="Brazil") %>% select(PA.NUS.PPP))
PPP_ZAF <- as.numeric(PPP_cty %>% filter(country=="South Africa") %>% select(PA.NUS.PPP))
# PPP_IND <- as.numeric(PPP_cty %>% filter(country=="India") %>% select(PA.NUS.PRVT.PP))
# PPP_BRA <- as.numeric(PPP_cty %>% filter(country=="Brazil") %>% select(PA.NUS.PRVT.PP))
# PPP_ZAF <- as.numeric(PPP_cty %>% filter(country=="South Africa") %>% select(PA.NUS.PRVT.PP))
# Exchange rate (MER) [LCU/$]
EXR_EUR <- WDI(country = "XC", indicator = "PA.NUS.FCRF", start = IO.year, end = IO.year, extra = FALSE, cache = NULL)
EXR_EUR <- EXR_EUR %>% rename(r=PA.NUS.FCRF)
EXR_cty <- WDI(country = c("IN", "BR", "ZA"), indicator = "PA.NUS.FCRF", start = IO.year, end = IO.year, extra = FALSE, cache = NULL)
EXR_IND <- as.numeric(EXR_cty %>% filter(country=="India") %>% select(PA.NUS.FCRF))
EXR_BRA <- as.numeric(EXR_cty %>% filter(country=="Brazil") %>% select(PA.NUS.FCRF))
EXR_ZAF <- as.numeric(EXR_cty %>% filter(country=="South Africa") %>% select(PA.NUS.FCRF))
# HH Consumption in India 2007 [US$]
HH_CON <- WDI(country = c("IN", "BR", "ZA"),
indicator = c(#"NE.CON.PETC.CD",
"NE.CON.PRVT.CD",
# "NE.CON.PETC.CN",
"NE.CON.PRVT.KD"),
start = 2004, end = 2011, extra = FALSE, cache = NULL)
BRA_con_grwth <- as.numeric(HH_CON %>% filter(year==2008 & iso2c=='BR') %>% select(NE.CON.PRVT.KD) /
HH_CON %>% filter(year==IO.year & iso2c=='BR') %>% select(NE.CON.PRVT.KD))
IND_con_grwth <- as.numeric(HH_CON %>% filter(year==2011 & iso2c=='IN') %>% select(NE.CON.PRVT.KD) /
HH_CON %>% filter(year==IO.year & iso2c=='IN') %>% select(NE.CON.PRVT.KD))
ZAF_con_grwth <- as.numeric(HH_CON %>% filter(year==2010 & iso2c=='ZA') %>% select(NE.CON.PRVT.KD) /
HH_CON %>% filter(year==IO.year & iso2c=='ZA') %>% select(NE.CON.PRVT.KD))
# Imports/Exports of goods and services (% of GDP)
WDI(country = c("IN", "BR"), indicator = c("NE.IMP.GNFS.ZS", "NE.EXP.GNFS.ZS"), start = 2007, end = 2007, extra = FALSE, cache = NULL)
Popul <- WDI(country = c("IN", "BR", "FR", "ZA"), indicator = "SP.POP.TOTL", start = 2007, end = 2015, extra = FALSE, cache = NULL)
BRA_pop_io.yr <- Popul %>% rename(pop=SP.POP.TOTL) %>% filter(iso2c=="BR" & year==IO.year) %>% select(pop) %>% as.numeric()#1.9e8
IND_pop_io.yr <- Popul %>% rename(pop=SP.POP.TOTL) %>% filter(iso2c=="IN" & year==IO.year) %>% select(pop) %>% as.numeric()#1.159e9
ZAF_pop_io.yr <- Popul %>% rename(pop=SP.POP.TOTL) %>% filter(iso2c=="ZA" & year==IO.year) %>% select(pop) %>% as.numeric()#1.159e9
##################################################################################################
# Intensity in MJ/EUR MER (IO.year: tfei.exio) -> MJ/USD PPP (svy year)
# sum(tfei.exio[,BRA_idx_ex[idx.education.exio]]) / (EXR_BRA * CPI_ratio_BRA.edu / PPP_BRA) * EXR_EUR$r #
# sum(tfei.exio[,IND_idx_ex[idx.education.exio]]) / (EXR_IND * CPI_ratio_IND.edu / PPP_IND) * EXR_EUR$r #
# sum(tfei.exio[,ZAF_idx_ex[idx.education.exio]]) / (EXR_ZAF * CPI_ratio_ZAF.edu / PPP_ZAF) * EXR_EUR$r #
# sum(tfei.exio[,BRA_idx_ex[idx.health.exio]]) / (EXR_BRA * CPI_ratio_BRA.hth / PPP_BRA) * EXR_EUR$r #
# sum(tfei.exio[,IND_idx_ex[idx.health.exio]]) / (EXR_IND * CPI_ratio_IND.hth / PPP_IND) * EXR_EUR$r #
# sum(tfei.exio[,ZAF_idx_ex[idx.health.exio]]) / (EXR_ZAF * CPI_ratio_ZAF.hth / PPP_ZAF) * EXR_EUR$r #
colSums(tfei.exio[,BRA_idx_ex[c(idx.education.exio,idx.health.exio)]]) / (EXR_BRA * CPI_ratio_BRA / PPP_BRA) * EXR_EUR$r #
colSums(tfei.exio[,IND_idx_ex[c(idx.education.exio,idx.health.exio)]]) / (EXR_IND * CPI_ratio_IND / PPP_IND) * EXR_EUR$r #
colSums(tfei.exio[,ZAF_idx_ex[c(idx.education.exio,idx.health.exio)]]) / (EXR_ZAF * CPI_ratio_ZAF / PPP_ZAF) * EXR_EUR$r #
# L_inverse is required here.
TFEI.EXIO.ts.debug <- sapply(DLE.countries, TFEI.ApplyKeyTechImprovement.EXIO, dfei=dfei.exio, simplify=FALSE, USE.NAMES = TRUE) # Returns a list
DLE.intensity.debug <- FormatDLEInputTable.EXIO(c("Education", "Health"), "Intensity", carr="total",
TFEI.EXIO.ts.debug, c(idx.education.exio, idx.health.exio))
DLE.intensity.debug
tpei.health.exio
colSums(tnei.exio[,c(IND_idx_ex[idx.health.exio], BRA_idx_ex[idx.health.exio], ZAF_idx_ex[idx.health.exio])])
colSums(tfei.exio[,c(IND_idx_ex[idx.health.exio], BRA_idx_ex[idx.health.exio], ZAF_idx_ex[idx.health.exio])])
2.7/3.3
1.54/2.44
.81/3.3
0.63/2.44
############################################################
### Read final demand vector from each country's CES DB  ###
############################################################
source("P:/ene.general/DecentLivingEnergy/Surveys/Generic function to access database.R")
IND_asset <- selectDBdata(tables='IND1_ASSET')
head(IND_asset)
(IND_asset) %>% count(item)
a= (IND_asset) %>% count(item)
View(a)
head(IND_asset)
length(unique(IND_asset$id))
1.3^(1/10)
0.3^(1/10)
load( file="./Saved tables/IND_intensities.Rda")
source("P:/ene.general/DecentLivingEnergy/Surveys/Generic function to access database.R")
# 1. Mapping between IND1 survey CODE between ICP_SEQ code
a1 <- join(IND_WB, icp_ntnu, by="ICP_SEQ") %>% select( -COICOP1, -COICOP2, -NTNU_109)  # into the DB
# 2. ICP 164 category names (including fuel)
a2 <- data.frame(ICP_CODE=1:164, ICP_NAME = ICP_catnames) # into the DB
load( file="./Saved tables/IND_intensities.Rda")
dim(IND_intensity)
colMeans(IND_intensity)
load( file="./Saved tables/IND.tfei.icp.fix.2010.IO.Rda")
a=load( file="./Saved tables/IND.tfei.icp.fix.2010.IO.Rda")
a
dim(IND.tfei.ic)
dim(IND.tfei.icp)
colMeans(IND.tfei.icp)
exio_ctys <- c("AT", "BE", "BG", "CY", "CZ", "DE", "DK", "EE", "ES", "FI",
"FR", "GR",
# "HR", # Added new at EXIO3
"HU", "IE", "IT", "LT", "LU", "LV", "MT", "NL",
"PL", "PT", "RO", "SE", "SI", "SK", "GB", "US", "JP", "CN",
"CA", "KR", "BR", "IN", "MX", "RU", "AU", "CH", "TR", "TW",
"NO", "ID", "ZA", "WA", "WL", "WE", "WF", "WM")
library(countrycode)
countrycode(exio_ctys, 'iso2c', '')
?`countrycode
''
?countrycode
countrycode(exio_ctys, 'iso2c', 'country.name')
library(WDI)
a<-WDI(indicator = c("SI.POV.DDAY", "SI.POV.LMIC", "SI.POV.UMIC"), start = 2010, end = 2017, extra = FALSE, cache = NULL)
View(a)
a<-WDI(indicator = c("SI.POV.DDAY", "SI.POV.LMIC", "SI.POV.UMIC", "NY.GDP.PCAP.PP.CD", "SP.POP.TOTL"), start = 2015, end = 2017, extra = FALSE, cache = NULL)
View(a)
View(a)
3.2*365
?WDI
a<-WDI(indicator = c("SI.POV.DDAY", "SI.POV.LMIC", "SI.POV.UMIC", "NY.GDP.PCAP.PP.CD", "SP.POP.TOTL"), start = 2015, end = 2017, extra = TRUE, cache = NULL)
a<-WDI(indicator = c("SI.POV.DDAY", "SI.POV.LMIC", "SI.POV.UMIC", "NY.GDP.PCAP.PP.CD", "SP.POP.TOTL"), start = 2016, end = 2017, extra = TRUE, cache = NULL)
View(a)
a$capital
a$longitude
a$capital==""
a<-WDI(indicator = c("SI.POV.DDAY", "SI.POV.LMIC", "SI.POV.UMIC", "NY.GDP.PCAP.PP.CD", "SP.POP.TOTL"), start = 2016, end = 2017, extra = TRUE, cache = NULL) %>% filter(capital!="")
a2016<-WDI(indicator = c("SI.POV.DDAY", "SI.POV.LMIC", "SI.POV.UMIC", "NY.GDP.PCAP.PP.CD", "SP.POP.TOTL"), start = 2016, end = 2016, extra = TRUE, cache = NULL) %>% filter(capital!="")
a2017<-WDI(indicator = c("SI.POV.DDAY", "SI.POV.LMIC", "SI.POV.UMIC", "NY.GDP.PCAP.PP.CD", "SP.POP.TOTL"), start = 2017, end = 2017, extra = TRUE, cache = NULL) %>% filter(capital!="")
View(a2016)
a2017<-WDI(indicator = c("SI.POV.DDAY", "SI.POV.LMIC", "SI.POV.UMIC", "NY.GDP.PCAP.PP.CD", "SP.POP.TOTL"), start = 2017, end = 2017, extra = TRUE, cache = NULL) %>% filter(capital!="") %>% filter(!is.na(SI.POV.DDAY))
a2016<-WDI(indicator = c("SI.POV.DDAY", "SI.POV.LMIC", "SI.POV.UMIC", "NY.GDP.PCAP.PP.CD", "SP.POP.TOTL"), start = 2017, end = 2016, extra = TRUE, cache = NULL) %>% filter(capital!="") %>% filter(!is.na(SI.POV.DDAY))
a2016<-WDI(indicator = c("SI.POV.DDAY", "SI.POV.LMIC", "SI.POV.UMIC", "NY.GDP.PCAP.PP.CD", "SP.POP.TOTL"), start = 2016, end = 2016, extra = TRUE, cache = NULL) %>% filter(capital!="") %>% filter(!is.na(SI.POV.DDAY))
View(a2016)
View(a2017)
y=2015
a2015<-WDI(indicator = c("SI.POV.DDAY", "SI.POV.LMIC", "SI.POV.UMIC", "NY.GDP.PCAP.PP.CD", "SP.POP.TOTL"), start = y, end = y, extra = TRUE, cache = NULL) %>% filter(capital!="") %>% filter(!is.na(SI.POV.DDAY))
View(a2015)
a<-WDI(indicator = c("SI.POV.DDAY", "SI.POV.LMIC", "SI.POV.UMIC", "NY.GDP.PCAP.PP.CD", "SP.POP.TOTL"), start = 2010, end = 2017, extra = TRUE, cache = NULL) %>% filter(capital!="")
a<-WDI(indicator = c("SI.POV.DDAY", "SI.POV.LMIC", "SI.POV.UMIC", "NY.GDP.PCAP.PP.CD", "SP.POP.TOTL"), start = 2010, end = 2017, extra = TRUE, cache = NULL) %>% filter(capital!="") %>% filter(!is.na(SI.POV.DDAY))
a %>% count(year)
